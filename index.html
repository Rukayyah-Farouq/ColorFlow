<!doctype html>
<html lang="en">
<head>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5544943514738569"
     crossorigin="anonymous"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z6VLYXD67G"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z6VLYXD67G');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ColorFlow - Random Color Generator</title>
  <meta name="description" content="Generate random colors and color palettes easily with ColorFlow Copy the hex, and create multiple color swatches in seconds" >
  <link rel="icon" href="favicon.ico">
  <script src="/_sdk/element_sdk.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Delicious+Handrawn&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap');
    body {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: #f8f9fa;
      min-height: 100%;
      display: flex;
      flex-direction: column;
    }

    * {
      box-sizing: border-box;
    }

    .container {
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
      padding: 48px 24px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    header {
      text-align: center;
      margin-bottom: 48px;
    }

    h1 {
      font-family: "Fredoka", sans-serif;
      font-weight: 700;
      background: linear-gradient(160deg, blue, green);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0 0 12px 0;
      letter-spacing: -0.5px;
    }
    #page-title{
        font-size: 4em;
    }

    .subtitle {
      font-size: 20px;
      color: #6b7280;
      margin: 0;
      font-family: "Delicious Handrawn", cursive;
    }

    .controls {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-bottom: 32px;
    }

    .control-group {
      margin-bottom: 24px;
    }

    .control-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .number-selector {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .number-btn {
      flex: 1;
      min-width: 60px;
      padding: 16px;
      border: 2px solid #e5e7eb;
      background: white;
      border-radius: 12px;
      font-size: 20px;
      font-weight: 600;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .number-btn:hover {
      border-color: #d1d5db;
      background: #f9fafb;
    }

    .number-btn.active {
      border-color: #3b82f6;
      background: #3b82f6;
      color: white;
    }

    .generate-btn {
      width: 100%;
      padding: 18px 32px;
      background: #1a1a1a;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .generate-btn:hover {
      background: #000000;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    .colors-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 32px;
    }

    .color-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .color-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
    }

    .color-preview {
      width: 100%;
      height: 200px;
      position: relative;
    }

    .color-info {
      padding: 20px;
      text-align: center;
    }

    .color-hex {
      font-size: 18px;
      font-weight: 600;
      color: #1a1a1a;
      font-family: 'Courier New', monospace;
      margin: 0 0 8px 0;
    }

    .color-rgb {
      font-size: 14px;
      font-weight: 500;
      color: #6b7280;
      font-family: 'Courier New', monospace;
      margin: 0 0 8px 0;
    }

    .copy-hint {
      font-size: 12px;
      color: #9ca3af;
      margin-top: 8px;
    }

    .lock-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 8px;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.2s ease;
      backdrop-filter: blur(8px);
    }

    .lock-btn:hover {
      background: rgba(255, 255, 255, 1);
      transform: scale(1.1);
    }

    .lock-btn.locked {
      background: rgba(59, 130, 246, 0.9);
    }

    .lock-btn.locked:hover {
      background: rgba(59, 130, 246, 1);
    }

    .save-section {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-top: 32px;
    }
    .save-section h2 {
      font-size: 24px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 0 0 20px 0;
    }
    .save-palette-btn {
      width: 100%;
      padding: 16px 32px;
      background: #10b981;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 24px;
    }
    .save-palette-btn:hover {
      background: #059669;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    .saved-palettes {
        display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .saved-palette {
      background: #f9fafb;
      border-radius: 12px;
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      align-items: center;
      gap: 12px;
    }
   

    .palette-colors {
      display: flex;
      gap: 8px;
      flex: 1;
    }

    .palette-color-swatch {
      width: 50px;
      height: 50px;
      border-radius: 8px;
      border: 2px solid white;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .palette-actions {
      display: flex;
      gap: 8px;
    }

    .palette-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .load-btn {
      background: #3b82f6;
      color: white;
    }

    .load-btn:hover {
      background: #2563eb;
    }

    .delete-btn {
      background: #ef4444;
      color: white;
    }

    .delete-btn:hover {
      background: #dc2626;
    }

    .empty-state {
      text-align: center;
      padding: 32px;
      color: #9ca3af;
      font-size: 14px;
    }

    .contrast-section {
      background: white;
      border-radius: 16px;
      padding: 32px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      margin-top: 32px;
    }

    .contrast-section h2 {
      font-size: 24px;
      font-weight: 700;
      color: #1a1a1a;
      margin: 0 0 8px 0;
    }

    .contrast-description {
      font-size: 14px;
      color: #6b7280;
      margin: 0 0 24px 0;
    }

    .contrast-inputs {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .color-input-group label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: #374151;
      margin-bottom: 8px;
    }

    .color-input-wrapper {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .color-input-wrapper input[type="color"] {
      width: 60px;
      height: 48px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      cursor: pointer;
      background: white;
    }

    .color-input-wrapper input[type="text"] {
      flex: 1;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 16px;
      font-family: 'Courier New', monospace;
      font-weight: 600;
      text-transform: uppercase;
    }

    .color-input-wrapper input[type="text"]:focus {
      outline: none;
      border-color: #3b82f6;
    }

    .contrast-preview {
      margin-bottom: 24px;
    }

    .preview-box {
      border-radius: 12px;
      padding: 32px;
      min-height: 150px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      justify-content: center;
      align-items: center;
      transition: all 0.3s ease;
    }

    .preview-large {
      font-size: 24px;
      font-weight: 700;
      text-align: center;
    }

    .preview-normal {
      font-size: 16px;
      font-weight: 400;
      text-align: center;
    }

    .contrast-results {
      background: #f9fafb;
      border-radius: 12px;
      padding: 24px;
    }

    .contrast-ratio {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e5e7eb;
    }

    .ratio-label {
      font-size: 16px;
      font-weight: 600;
      color: #374151;
    }

    .ratio-value {
      font-size: 32px;
      font-weight: 700;
      color: #1a1a1a;
      font-family: 'Courier New', monospace;
    }

    .wcag-compliance {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .compliance-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: white;
      border-radius: 8px;
    }

    .compliance-label {
      font-size: 14px;
      font-weight: 600;
      color: #374151;
    }

    .compliance-badge {
      font-size: 14px;
      font-weight: 600;
      padding: 4px 12px;
      border-radius: 6px;
    }

    .compliance-badge.pass {
      background: #d1fae5;
      color: #065f46;
    }

    .compliance-badge.fail {
      background: #fee2e2;
      color: #991b1b;
    }

    .copied-toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #1a1a1a;
      color: white;
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
      z-index: 1000;
    }

    .copied-toast.show {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    } 
    @media screen and (max-width:602px) {
        .palette-colors {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
    }
    }
    @media screen and (max-width:410px) {
        .palette-colors {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
    }
    }
    @media screen and (max-width:373px) {
        .palette-colors {
      display: grid;
      grid-template-columns: repeat(1, 1fr);
    }
    }
    @media screen and (max-width:373px) {
        .saved-palette {
      display: flex;
      flex-direction: column;
    }
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 36px;
      }

      .subtitle {
        font-size: 16px;
      }

      .controls {
        padding: 24px;
      }

      .colors-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
</head>
<body>
  <main class="container">
   <header>
    <h1 id="page-title">ColorFlow</h1>
    <p class="subtitle" id="page-subtitle">Design Faster with perfect colors</p>
   </header>
   <div class="controls">
    <div class="control-group"><label for="color-count">Number of Colors</label>
     <div class="number-selector" id="number-selector"><button class="number-btn active" data-value="1">1</button> <button class="number-btn" data-value="2">2</button> <button class="number-btn" data-value="3">3</button> <button class="number-btn" data-value="4">4</button> <button class="number-btn" data-value="5">5</button>
     </div>
    </div>
    <div class="control-group"><button class="generate-btn" id="generate-btn">Generate Colors</button>
    </div>
   </div>
   <div class="colors-grid" id="colors-grid"></div>
   <div class="save-section">
    <h2>Saved Palettes</h2><button class="save-palette-btn" id="save-palette-btn">Save Current Palette</button>
    <div class="saved-palettes" id="saved-palettes">
     <div class="empty-state">
      No saved palettes yet. Generate and save your first palette!
     </div>
    </div>
   </div>
   <div class="contrast-section">
    <h2>Contrast Checker</h2>
    <p class="contrast-description">Check if your color combinations meet WCAG accessibility standards</p>
    <div class="contrast-inputs">
     <div class="color-input-group"><label for="contrast-fg">Foreground Color</label>
      <div class="color-input-wrapper"><input type="color" id="contrast-fg-picker" value="#000000"> <input type="text" id="contrast-fg" value="#000000" placeholder="#000000">
      </div>
     </div>
     <div class="color-input-group"><label for="contrast-bg">Background Color</label>
      <div class="color-input-wrapper"><input type="color" id="contrast-bg-picker" value="#FFFFFF"> <input type="text" id="contrast-bg" value="#FFFFFF" placeholder="#FFFFFF">
      </div>
     </div>
    </div>
    <div class="contrast-preview">
     <div class="preview-box" id="contrast-preview-box">
      <div class="preview-large" id="preview-large">
       Large Text (18pt+)
      </div>
      <div class="preview-normal" id="preview-normal">
       Normal Text (14-18pt)
      </div>
     </div>
    </div>
    <div class="contrast-results" id="contrast-results">
     <div class="contrast-ratio"><span class="ratio-label">Contrast Ratio:</span> <span class="ratio-value" id="ratio-value">21:1</span>
     </div>
     <div class="wcag-compliance">
      <div class="compliance-item"><span class="compliance-label">Normal Text (AA):</span> <span class="compliance-badge" id="normal-aa">âœ“ Pass</span>
      </div>
      <div class="compliance-item"><span class="compliance-label">Normal Text (AAA):</span> <span class="compliance-badge" id="normal-aaa">âœ“ Pass</span>
      </div>
      <div class="compliance-item"><span class="compliance-label">Large Text (AA):</span> <span class="compliance-badge" id="large-aa">âœ“ Pass</span>
      </div>
      <div class="compliance-item"><span class="compliance-label">Large Text (AAA):</span> <span class="compliance-badge" id="large-aaa">âœ“ Pass</span>
      </div>
     </div>
    </div>
   </div>
  </main>
  <div class="copied-toast" id="copied-toast">
   Color copied to clipboard! ðŸŽ¨
  </div>
  <style>
    .foot{
      display: flex;
      align-items: center;
      justify-content: space-around;
      width: 100%;
      height: 10vh;
      background-color: #4942ff;
      margin-top: 4em;
    }
    .foot a{
      text-decoration: none;
      color: white;
      font-size: 18px;
      font-family: Verdana, Geneva, Tahoma, sans-serif;
    }
    </style>
  <footer class="foot">
    <a href="./index.html">Home</a>
    <a href="./about.html" target="_blank">About Page</a>
    <a href="./privacy.html">Privacy Policy Page</a>
    <a href="./terms.html">Terms of Service</a>
  </footer>
  <script>
    const defaultConfig = {
      page_title: "Color Generator",
      page_subtitle: "Generate beautiful random colors instantly",
      generate_button_text: "Generate Colors",
      background_color: "#f8f9fa",
      surface_color: "#ffffff",
      text_color: "#1a1a1a",
      primary_action_color: "#1a1a1a",
      secondary_action_color: "#3b82f6",
      font_family: "sans-serif",
      font_size: 16
    };

    let selectedCount = 1;
    let currentColors = [];
    let lockedColors = new Set();

    async function onConfigChange(config) {
      const baseSize = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif';

      document.body.style.background = config.background_color || defaultConfig.background_color;
      document.body.style.color = config.text_color || defaultConfig.text_color;
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.body.style.fontSize = `${baseSize}px`;

      const title = document.getElementById('page-title');
      title.textContent = config.page_title || defaultConfig.page_title;
      title.style.fontFamily = `${customFont}, ${baseFontStack}`;
      title.style.fontSize = `${baseSize * 3}px`;
      title.style.color = config.text_color || defaultConfig.text_color;

      const subtitle = document.getElementById('page-subtitle');
      subtitle.textContent = config.page_subtitle || defaultConfig.page_subtitle;
      subtitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      subtitle.style.fontSize = `${baseSize * 1.125}px`;

      const generateBtn = document.getElementById('generate-btn');
      generateBtn.textContent = config.generate_button_text || defaultConfig.generate_button_text;
      generateBtn.style.background = config.primary_action_color || defaultConfig.primary_action_color;
      generateBtn.style.fontFamily = `${customFont}, ${baseFontStack}`;
      generateBtn.style.fontSize = `${baseSize}px`;

      const controls = document.querySelector('.controls');
      controls.style.background = config.surface_color || defaultConfig.surface_color;

      const numberBtns = document.querySelectorAll('.number-btn');
      numberBtns.forEach(btn => {
        btn.style.fontFamily = `${customFont}, ${baseFontStack}`;
        btn.style.fontSize = `${baseSize * 1.25}px`;
        if (btn.classList.contains('active')) {
          btn.style.background = config.secondary_action_color || defaultConfig.secondary_action_color;
          btn.style.borderColor = config.secondary_action_color || defaultConfig.secondary_action_color;
        } else {
          btn.style.background = config.surface_color || defaultConfig.surface_color;
        }
      });

      const colorCards = document.querySelectorAll('.color-card');
      colorCards.forEach(card => {
        card.style.background = config.surface_color || defaultConfig.surface_color;
        const hex = card.querySelector('.color-hex');
        const rgb = card.querySelector('.color-rgb');
        if (hex) {
          hex.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          hex.style.fontSize = `${baseSize * 1.125}px`;
          hex.style.color = config.text_color || defaultConfig.text_color;
        }
        if (rgb) {
          rgb.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          rgb.style.fontSize = `${baseSize * 0.875}px`;
        }
      });

      const labels = document.querySelectorAll('label');
      labels.forEach(label => {
        label.style.fontFamily = `${customFont}, ${baseFontStack}`;
        label.style.fontSize = `${baseSize * 0.875}px`;
      });
    }

    function generateRandomColor() {
      const letters = '0123456789ABCDEF';
      let color = '#';
      for (let i = 0; i < 6; i++) {
        color += letters[Math.floor(Math.random() * 16)];
      }
      return color;
    }

    function hexToRgb(hex) {
      const r = parseInt(hex.slice(1, 3), 16);
      const g = parseInt(hex.slice(3, 5), 16);
      const b = parseInt(hex.slice(5, 7), 16);
      return `rgb(${r}, ${g}, ${b})`;
    }

    function generateColors() {
      const grid = document.getElementById('colors-grid');
      grid.innerHTML = '';

      // Adjust locked colors if count changed
      if (currentColors.length > selectedCount) {
        currentColors = currentColors.slice(0, selectedCount);
        lockedColors = new Set([...lockedColors].filter(i => i < selectedCount));
      } else if (currentColors.length < selectedCount) {
        while (currentColors.length < selectedCount) {
          currentColors.push(generateRandomColor());
        }
      }

      // Generate new colors for unlocked positions
      for (let i = 0; i < selectedCount; i++) {
        if (!lockedColors.has(i)) {
          currentColors[i] = generateRandomColor();
        }
      }

      // Render all colors
      for (let i = 0; i < selectedCount; i++) {
        const color = currentColors[i];
        const rgb = hexToRgb(color);
        const isLocked = lockedColors.has(i);
       
        const card = document.createElement('div');
        card.className = 'color-card';
        card.innerHTML = `
          <div class="color-preview" style="background: ${color};">
            <button class="lock-btn ${isLocked ? 'locked' : ''}" data-index="${i}">
              ${isLocked ? 'ðŸ”’' : 'ðŸ”“'}
            </button>
          </div>
          <div class="color-info">
            <p class="color-hex">${color}</p>
            <p class="color-rgb">${rgb}</p>
            <p class="copy-hint">Click to copy HEX</p>
          </div>
        `;

        // Lock button handler
        const lockBtn = card.querySelector('.lock-btn');
        lockBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const index = parseInt(e.currentTarget.dataset.index);
          if (lockedColors.has(index)) {
            lockedColors.delete(index);
            e.currentTarget.classList.remove('locked');
            e.currentTarget.textContent = 'ðŸ”“';
          } else {
            lockedColors.add(index);
            e.currentTarget.classList.add('locked');
            e.currentTarget.textContent = 'ðŸ”’';
          }
        });

        // Copy color handler
        card.addEventListener('click', (e) => {
          if (!e.target.closest('.lock-btn')) {
            navigator.clipboard.writeText(color).then(() => {
              showCopiedToast();
            });
          }
        });

        grid.appendChild(card);
      }

      const config = window.elementSdk?.config || defaultConfig;
      const colorCards = document.querySelectorAll('.color-card');
      colorCards.forEach(card => {
        card.style.background = config.surface_color || defaultConfig.surface_color;
        const hex = card.querySelector('.color-hex');
        const rgb = card.querySelector('.color-rgb');
        if (hex) {
          const baseSize = config.font_size || defaultConfig.font_size;
          const customFont = config.font_family || defaultConfig.font_family;
          hex.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          hex.style.fontSize = `${baseSize * 1.125}px`;
          hex.style.color = config.text_color || defaultConfig.text_color;
        }
        if (rgb) {
          const baseSize = config.font_size || defaultConfig.font_size;
          const customFont = config.font_family || defaultConfig.font_family;
          rgb.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          rgb.style.fontSize = `${baseSize * 0.875}px`;
        }
      });
    }

    function showCopiedToast() {
      const toast = document.getElementById('copied-toast');
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 2000);
    }

    function savePalette() {
      if (currentColors.length === 0) return;

      const savedPalettes = JSON.parse(localStorage.getItem('colorPalettes') || '[]');
      savedPalettes.push({
        id: Date.now(),
        colors: [...currentColors],
        timestamp: new Date().toISOString()
      });
      localStorage.setItem('colorPalettes', JSON.stringify(savedPalettes));
      renderSavedPalettes();
     
      const toast = document.getElementById('copied-toast');
      toast.textContent = 'Palette saved! ðŸ’¾';
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
        toast.textContent = 'Color copied to clipboard! ðŸŽ¨';
      }, 2000);
    }

    function loadPalette(colors) {
      selectedCount = colors.length;
      currentColors = [...colors];
      lockedColors.clear();
     
      // Update number selector
      document.querySelectorAll('.number-btn').forEach(btn => {
        const config = window.elementSdk?.config || defaultConfig;
        if (parseInt(btn.dataset.value) === selectedCount) {
          btn.classList.add('active');
          btn.style.background = config.secondary_action_color || defaultConfig.secondary_action_color;
          btn.style.borderColor = config.secondary_action_color || defaultConfig.secondary_action_color;
          btn.style.color = 'white';
        } else {
          btn.classList.remove('active');
          btn.style.background = config.surface_color || defaultConfig.surface_color;
          btn.style.borderColor = '#e5e7eb';
          btn.style.color = '#6b7280';
        }
      });
     
      renderColors();
    }

    function deletePalette(id) {
      const savedPalettes = JSON.parse(localStorage.getItem('colorPalettes') || '[]');
      const filtered = savedPalettes.filter(p => p.id !== id);
      localStorage.setItem('colorPalettes', JSON.stringify(filtered));
      renderSavedPalettes();
    }

    function renderColors() {
      const grid = document.getElementById('colors-grid');
      grid.innerHTML = '';

      for (let i = 0; i < selectedCount; i++) {
        const color = currentColors[i];
        const rgb = hexToRgb(color);
        const isLocked = lockedColors.has(i);
       
        const card = document.createElement('div');
        card.className = 'color-card';
        card.innerHTML = `
          <div class="color-preview" style="background: ${color};">
            <button class="lock-btn ${isLocked ? 'locked' : ''}" data-index="${i}">
              ${isLocked ? 'ðŸ”’' : 'ðŸ”“'}
            </button>
          </div>
          <div class="color-info">
            <p class="color-hex">${color}</p>
            <p class="color-rgb">${rgb}</p>
            <p class="copy-hint">Click to copy HEX</p>
          </div>
        `;

        const lockBtn = card.querySelector('.lock-btn');
        lockBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          const index = parseInt(e.currentTarget.dataset.index);
          if (lockedColors.has(index)) {
            lockedColors.delete(index);
            e.currentTarget.classList.remove('locked');
            e.currentTarget.textContent = 'ðŸ”“';
          } else {
            lockedColors.add(index);
            e.currentTarget.classList.add('locked');
            e.currentTarget.textContent = 'ðŸ”’';
          }
        });

        card.addEventListener('click', (e) => {
          if (!e.target.closest('.lock-btn')) {
            navigator.clipboard.writeText(color).then(() => {
              showCopiedToast();
            });
          }
        });

        grid.appendChild(card);
      }

      const config = window.elementSdk?.config || defaultConfig;
      const colorCards = document.querySelectorAll('.color-card');
      colorCards.forEach(card => {
        card.style.background = config.surface_color || defaultConfig.surface_color;
        const hex = card.querySelector('.color-hex');
        const rgb = card.querySelector('.color-rgb');
        if (hex) {
          const baseSize = config.font_size || defaultConfig.font_size;
          const customFont = config.font_family || defaultConfig.font_family;
          hex.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          hex.style.fontSize = `${baseSize * 1.125}px`;
          hex.style.color = config.text_color || defaultConfig.text_color;
        }
        if (rgb) {
          const baseSize = config.font_size || defaultConfig.font_size;
          const customFont = config.font_family || defaultConfig.font_family;
          rgb.style.fontFamily = `${customFont}, 'Courier New', monospace`;
          rgb.style.fontSize = `${baseSize * 0.875}px`;
        }
      });
    }

    function renderSavedPalettes() {
      const container = document.getElementById('saved-palettes');
      const savedPalettes = JSON.parse(localStorage.getItem('colorPalettes') || '[]');
     
      if (savedPalettes.length === 0) {
        container.innerHTML = '<div class="empty-state">No saved palettes yet. Generate and save your first palette!</div>';
        return;
      }

      container.innerHTML = savedPalettes.reverse().map(palette => `
        <div class="saved-palette">
          <div class="palette-colors">
            ${palette.colors.map(color => `
              <div class="palette-color-swatch" style="background: ${color};" title="${color}"></div>
            `).join('')}
          </div>
          <div class="palette-actions">
            <button class="palette-btn load-btn" data-id="${palette.id}">Load</button>
            <button class="palette-btn delete-btn" data-id="${palette.id}">Delete</button>
          </div>
        </div>
      `).join('');

      // Add event listeners
      container.querySelectorAll('.load-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = parseInt(e.target.dataset.id);
          const palette = savedPalettes.find(p => p.id === id);
          if (palette) loadPalette(palette.colors);
        });
      });

      container.querySelectorAll('.delete-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const id = parseInt(e.target.dataset.id);
          deletePalette(id);
        });
      });
    }

    document.getElementById('save-palette-btn').addEventListener('click', savePalette);

    document.getElementById('number-selector').addEventListener('click', (e) => {
      const clickedBtn = e.target.closest('.number-btn');
      if (clickedBtn) {
        document.querySelectorAll('.number-btn').forEach(btn => {
          btn.classList.remove('active');
          const config = window.elementSdk?.config || defaultConfig;
          btn.style.background = config.surface_color || defaultConfig.surface_color;
          btn.style.borderColor = '#e5e7eb';
          btn.style.color = '#6b7280';
        });

        clickedBtn.classList.add('active');
        const config = window.elementSdk?.config || defaultConfig;
        clickedBtn.style.background = config.secondary_action_color || defaultConfig.secondary_action_color;
        clickedBtn.style.borderColor = config.secondary_action_color || defaultConfig.secondary_action_color;
        clickedBtn.style.color = 'white';
        selectedCount = parseInt(clickedBtn.dataset.value);
       
        // Automatically generate new colors when number is clicked
        generateColors();
      }
    });

    document.getElementById('generate-btn').addEventListener('click', generateColors);

    generateColors();
    renderSavedPalettes();

    // Contrast Checker Functionality
    function getLuminance(hex) {
      const rgb = parseInt(hex.slice(1), 16);
      const r = (rgb >> 16) & 0xff;
      const g = (rgb >> 8) & 0xff;
      const b = (rgb >> 0) & 0xff;

      const rsRGB = r / 255;
      const gsRGB = g / 255;
      const bsRGB = b / 255;

      const rLinear = rsRGB <= 0.03928 ? rsRGB / 12.92 : Math.pow((rsRGB + 0.055) / 1.055, 2.4);
      const gLinear = gsRGB <= 0.03928 ? gsRGB / 12.92 : Math.pow((gsRGB + 0.055) / 1.055, 2.4);
      const bLinear = bsRGB <= 0.03928 ? bsRGB / 12.92 : Math.pow((bsRGB + 0.055) / 1.055, 2.4);

      return 0.2126 * rLinear + 0.7152 * gLinear + 0.0722 * bLinear;
    }

    function getContrastRatio(color1, color2) {
      const lum1 = getLuminance(color1);
      const lum2 = getLuminance(color2);
      const lighter = Math.max(lum1, lum2);
      const darker = Math.min(lum1, lum2);
      return (lighter + 0.05) / (darker + 0.05);
    }

    function isValidHex(hex) {
      return /^#[0-9A-F]{6}$/i.test(hex);
    }

    function updateContrastChecker() {
      const fgColor = document.getElementById('contrast-fg').value.toUpperCase();
      const bgColor = document.getElementById('contrast-bg').value.toUpperCase();

      if (!isValidHex(fgColor) || !isValidHex(bgColor)) return;

      const ratio = getContrastRatio(fgColor, bgColor);
     
      // Update preview
      const previewBox = document.getElementById('contrast-preview-box');
      previewBox.style.background = bgColor;
      previewBox.style.color = fgColor;

      // Update ratio display
      document.getElementById('ratio-value').textContent = ratio.toFixed(2) + ':1';

      // Update WCAG compliance
      const normalAA = ratio >= 4.5;
      const normalAAA = ratio >= 7;
      const largeAA = ratio >= 3;
      const largeAAA = ratio >= 4.5;

      updateComplianceBadge('normal-aa', normalAA);
      updateComplianceBadge('normal-aaa', normalAAA);
      updateComplianceBadge('large-aa', largeAA);
      updateComplianceBadge('large-aaa', largeAAA);
    }

    function updateComplianceBadge(id, passed) {
      const badge = document.getElementById(id);
      if (passed) {
        badge.textContent = 'âœ“ Pass';
        badge.className = 'compliance-badge pass';
      } else {
        badge.textContent = 'âœ— Fail';
        badge.className = 'compliance-badge fail';
      }
    }

    // Contrast checker event listeners
    const fgPicker = document.getElementById('contrast-fg-picker');
    const fgInput = document.getElementById('contrast-fg');
    const bgPicker = document.getElementById('contrast-bg-picker');
    const bgInput = document.getElementById('contrast-bg');

    fgPicker.addEventListener('input', (e) => {
      fgInput.value = e.target.value.toUpperCase();
      updateContrastChecker();
    });

    fgInput.addEventListener('input', (e) => {
      const value = e.target.value.toUpperCase();
      if (isValidHex(value)) {
        fgPicker.value = value;
        updateContrastChecker();
      }
    });

    bgPicker.addEventListener('input', (e) => {
      bgInput.value = e.target.value.toUpperCase();
      updateContrastChecker();
    });

    bgInput.addEventListener('input', (e) => {
      const value = e.target.value.toUpperCase();
      if (isValidHex(value)) {
        bgPicker.value = value;
        updateContrastChecker();
      }
    });

    // Initial contrast check
    updateContrastChecker();

    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.background_color || defaultConfig.background_color,
              set: (value) => {
                config.background_color = value;
                window.elementSdk.setConfig({ background_color: value });
              }
            },
            {
              get: () => config.surface_color || defaultConfig.surface_color,
              set: (value) => {
                config.surface_color = value;
                window.elementSdk.setConfig({ surface_color: value });
              }
            },
            {
              get: () => config.text_color || defaultConfig.text_color,
              set: (value) => {
                config.text_color = value;
                window.elementSdk.setConfig({ text_color: value });
              }
            },
            {
              get: () => config.primary_action_color || defaultConfig.primary_action_color,
              set: (value) => {
                config.primary_action_color = value;
                window.elementSdk.setConfig({ primary_action_color: value });
              }
            },
            {
              get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
              set: (value) => {
                config.secondary_action_color = value;
                window.elementSdk.setConfig({ secondary_action_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || defaultConfig.font_family,
            set: (value) => {
              config.font_family = value;
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: {
            get: () => config.font_size || defaultConfig.font_size,
            set: (value) => {
              config.font_size = value;
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }),
        mapToEditPanelValues: (config) => new Map([
          ['page_title', config.page_title || defaultConfig.page_title],
          ['page_subtitle', config.page_subtitle || defaultConfig.page_subtitle],
          ['generate_button_text', config.generate_button_text || defaultConfig.generate_button_text]
        ])
      });
    }
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a213f135101719e',t:'MTc2MzczOTIxNi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>